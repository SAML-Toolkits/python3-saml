language: python
python:
  - '2.7.6'
# - '2.7.9'  
# - '2.7.12'
# - '3.3.4'
# - '3.3.5'
# - '3.3.6'
  - '3.4.3'
  - '3.5.0'

env:
  - CFLAGS="-Wall -O0 -g"

install:
  - sudo apt-get update -qq
  - sudo apt-get install -qq swig python-dev libxml2-dev libxmlsec1-dev
  - sudo apt-get install gdb
  - 'travis_retry pip install .'
  - 'travis_retry pip install -e ".[test]"'

script:
  - 'export CFLAGS="-Wall -O0 -g"'
  - './seg_wrapper.sh coverage run --source=src/onelogin/saml2 --rcfile=tests/coverage.rc setup.py test'
  - 'coverage report -m --rcfile=tests/coverage.rc'
# - 'pylint src/onelogin/saml2 --rcfile=tests/pylint.rc'
  - 'pep8 tests/src/OneLogin/saml2_tests/*.py demo-flask/*.py demo-django/*.py src/onelogin/saml2/*.py --config=tests/pep8.rc'
  - 'pyflakes src/onelogin/saml2 demo-django demo-flask tests/src/OneLogin/saml2_tests'

after_success: 'coveralls'
